
{% extends 'scrapers/base.html' %}


{% block content %}


<div class = "row">
    <div class="container col-md-8 scrollable music"> <!-- col-md-offset-0 -->


    {% if page == 'create_playlist' %}
    CREATE PLAYLIST
        <form action="/create_playlist/" method="post">{% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="Submit" />
        </form>
    {% endif %}






<!--         <div id = "login">
        {% if user and user.is_authenticated %}
            <p>Logged in as: {{ user.username }}</p>
            <a href='/accounts/logout'> Logout </a>
        {% else %}
                <a href = '/accounts/login'> Login </a>
                <br/>
                <a href = '/accounts/register'> Register </a>
        {% endif %}
        </div>
 -->



        <!-- <div id="player">
        </div>

        <br>
        <br>
        <div class="noUiSlider"></div>

        <br> -->

<!--         <button type="button" id ="play-previous">Previous</button>
        <button type="button" id ="play-pause">Pause/Unpause</button>
        <button type="button" id ="play-next">Next</button> -->
       <!--  <br>
        <button type="button" id ="track-seek">track.seek()</button>
 -->
<!--         <br></br>
        <button type="button" id ="artist-sort">Sort by Artist</button>
        <button type="button" id="label-sort">Sort by Label</button>
        <button type="button" id="date-sort">Sort by Date</button>
        <button type="button" id="catalog-sort">Sort by Catalog Number </button>
        <button type="button" id="type-sort">Sort by Type of Release </button>
 -->

        <!-- <img width="200" height="200" src="http://ws.audioscrobbler.com/2.0/?method=artist.imageredirect&amp;artist=JAY+Z+Picasso+Baby&amp;autocorrect=1&amp;size=largesquare&amp;api_key=a81521f42db5b48e3a474f30d1c9814d" class="to-begin-loading">
         -->

        {% if releases %}
<!--         <ul> Releases: -->
         <h2 > Releases </h2>
        {% for release in releases %}
        <li class = "release">
            <div class="media album stream-item release" 
            data-artist = "{{release.artist}}"
            data-artist-id = "{{release.artist_id}}"
            data-album-title = "{{release.title}}"
            data-catalog-num = "{{release.cat_num}}"
            data-label = "{{release.label}}"
            data-label-id = "{{ release.label_id }}"
            data-date = "{{release.date}}"
            data-reid = "{{release.reid}}" 
            data-primary-type = "{{release.primary_type}}"

            >
                <a class="pull-left" href="#">
                  <img width = "100" height = "100" class="media-object" src="http://ws.audioscrobbler.com/2.0/?method=album.imageredirect&amp;artist={{release.artist|escape}}&amp;album={{release.title|escape}}&amp;autocorrect=1&amp;size=largesquare&amp;api_key=c43db4e93f7608bb10d96fa5f69a74a1" alt="...">
                </a>
                
                <div class="media-body">
                  <h3 class="media-heading">

                    {%if release.artist_id%}
                    <a href = "/artist/{{ release.artist_id }}">
                    {% else %}
                    <!-- <a href = "/artist_name/{{ release.artist|escape }}"> -->
                    <a href = "/artist_search/?query={{ release.artist|escape }}">
                    {% endif %}
                    

                    <strong>{{release.artist}}</strong>  </a> <button type = "button" class = "btn btn-default follow-artist" data-artist-id = "{{ release.artist_id }}" data-following-artist = "{{release.following_artist}}">{{release.following_artist}}</button>
                    
                    <div class = "pull-right" >
                    <span class = "expand-album" >  
                        <a title = "Expand album" ><span data-reid = "{{release.reid}}" class="glyphicon glyphicon-chevron-down"></span></a>
                    </span>

                    {% if release.following_album %}
                        <a ><span 
                        data-reid = "{{release.reid}}" 
                        data-album-title = "{{release.title}}" 
                        data-artist = "{{release.artist}}" 
                        class="glyphicon glyphicon-heart love-album red">
                    </span></a>
                    {%else%}
                    <a ><span 
                        data-reid = "{{release.reid}}" 
                        data-album-title = "{{release.title}}" 
                        data-artist = "{{release.artist}}" 
                        class="glyphicon glyphicon-heart love-album">
                    </span></a>
                    {% endif %}


                    
                    <a ><span title = "add to playlist" class="glyphicon glyphicon-plus add-album"></span></a>    
                      <a title = "Play album" class = "btn btn-default"><span data-reid = "{{release.reid}}" class="glyphicon glyphicon-play play-entire-album"></span></a>
                    {%if page == "playlist" %}
                        <a title = "Delete album" ><span data-reid = "{{release.reid}}" data-playlist-id = {{playlist.pk}} data-entry-id = {{release.entry_id}} data-feast-id ={{release.feast_id}} class="glyphicon glyphicon-remove delete-album"></span></a>
                    {% endif %}

                    </div>
                    <br>
                    <em>{{release.title}}</em>
                     <span class = "release-type">[{{release.primary_type}}] 
                        {% if release.secondary_types %}
                        {% for s_type in release.secondary_types %} 
                            [{{ s_type }}]  
                        {% endfor %}
                        {% endif %} 
                    </span>

                  </h3>
                  <h4><a class = "label-link" href = "/label/{{ release.label_id|escape }}" >{{release.label}}</a><button type = "button" class = "btn btn-default follow-label" data-label-id = "{{ release.label_id }}" data-label-name = "{{ release.label }}">{{release.following_label}}</button></h4>
                  <h5 class = "catalog-number">{{release.cat_num}}</h5>
                  <h5 class = "date">{{release.date}}</h5>
                  <h4>
                  <ul type ="none" class = "album-tracks">
                   <!--  <li><a href = "#"><span class="glyphicon glyphicon-play"></span></a> <a href = "">Artist</a> - track 1 
                      <a title = "Love track" href = "#"><span class="glyphicon glyphicon-heart"></span></a>
                      <a title ="Add to playlist"><span class="glyphicon glyphicon-plus"></span></a>
                    </li> -->
                <!--     <li><a href = "#"><span class="glyphicon glyphicon-play"></span></a> <a href = "">Artist</a> - track 1 
                      <a href = "#"><span class="glyphicon glyphicon-heart"></span></a>
                      <a ><span class="glyphicon glyphicon-plus"></span></a>
                    </li><li><a href = "3"><span class="glyphicon glyphicon-play"></span></a> <a href = "">Artist</a> - track 1 
                      <a href = "#"><span class="glyphicon glyphicon-heart"></span></a>
                      <a ><span class="glyphicon glyphicon-plus"></span></a>
                    </li><li><a href = "3"><span class="glyphicon glyphicon-play"></span></a> <a href = "">Artist</a> - track 1 
                      <a href = "#"><span class="glyphicon glyphicon-heart"></span></a>
                      <a ><span class="glyphicon glyphicon-plus"></span></a>
                    </li> -->
                  </h4>
                  </ul>
                </div>
              </div>
            </li>

<!-- 


            <ul data-reid = "{{release.reid}}" data-artist ="{{ release.artist }}" data-title ="{{release.title}}" data-date = "{{release.date}}"data-label ="{{release.label}}" data-catalog-number = "{{release.cat_num}}" class = "stream-item release" > 
                <div>
                    <img width = "100" height="100" src = "http://ws.audioscrobbler.com/2.0/?method=album.imageredirect&amp;mbid={{release.reid}}&amp;autocorrect=1&amp;size=largesquare&amp;api_key=c43db4e93f7608bb10d96fa5f69a74a1">
                    <img width = "100" height="100" src = "http://ws.audioscrobbler.com/2.0/?method=album.imageredirect&amp;artist={{release.artist|escape}}&amp;album={{release.title|escape}}&amp;autocorrect=1&amp;size=largesquare&amp;api_key=c43db4e93f7608bb10d96fa5f69a74a1">
                </div>


                <a href = "/artist/{{ release.artist_id|escape }}">
                
                 {{ release.artist }} </a> 
                <span >
                    <button type="button" data-artist-id = "{{ release.artist_id }}" class ="follow-artist">
                        {{ release.following_artist }}
                    </button>
                </span>

                <div class = 'album'> {{release.title}}
                <span class = "release-type">[{{release.primary_type}}] 
                    {% if release.secondary_types %} 
                    {{release.secondary_types}}  
                    {% endif %} 
                </span>
                <span class = "date">{{release.date}}</span>
                </div>
                <div class = "label"><a class = "label-link" href = "/label/{{ release.label_id|escape }}" >{{release.label}}</a>
                    <span>
                        <button type="button" data-label-id = "{{ release.label_id }}" class ="follow-label">
                            {{release.following_label}}
                        </button>
                    </span>
                </div>
                <div class = "catalog-number">{{release.cat_num}}</div>
            </ul> -->
        {% endfor %}
        <!-- </ul> -->
        {% endif %}

        {% if title %}
        <h2>{{title}}</h2>
        {% endif %}
        {% if sounds %}
        <h2 >Songs </h2>

        <ul type=none id = "sounds">
        {% for sound in sounds%}
            <!-- <h5> -->
            <li class = " album-track track" 
            data-artist-id = "{{sound.artist_id}}" 
            data-artist = "{{sound.artist}}" 
            data-title = "{{sound.title}}"
            data-track-id = "{{sound.track_id}}" 
            data-type = "{{sound.type}}" 
            data-id = "{{sound.id}}"
            > 
                <a><span class="glyphicon glyphicon-play play-track"></span></a>

                {%if sound.artist_id%}
                    <a href = "/artist/{{ sound.artist_id }}">
                    {% else %}
                    <!-- <a href = "/artist_name/{{ sound.artist|escape }}"> -->
                    <a href = "/artist_search/?query={{ sound.artist|escape }}">
                        
                    {% endif %}
                <!-- <a href = "/artist_name/{{ sound.artist|urlencode }}"> -->


                    {{sound.artist}} </a> - {{sound.title}} 

                {%if page == "playlist" %}
                    <a title = "Delete track" class = "pull-right"><span data-reid = "{{sound.track_id}}" data-playlist-id = {{playlist.pk}} data-feast-id = "{{sound.feast_id}}"
                        data-entry-id = {{sound.entry_id}}
                        class="glyphicon glyphicon-remove delete-track"></span></a>
                {% endif %}

                <a class="pull-right" title="Add to Playlist"><span class="glyphicon glyphicon-plus playlist-add add-track"></span></a>
                <a class="pull-right" title="Love Track">

                    {% if sound.following_sound %}
                        <span class="glyphicon glyphicon-heart love-track red" ></span>
                    {% else %}
                        <span class="glyphicon glyphicon-heart love-track" ></span>
                    {% endif %}
                    </a>
                   
                
            <!-- </h5> -->
            </li>
        {% endfor %}
        </ul>
        {%endif %}

    {% if page == 'advanced_search' %}
        <form action="/lastfm_search" method="get">
        {% csrf_token %}
        Last.FM Username: <input type="text" id = "username" name = "username">
        <input type="submit" value="search" />
        </form>

        <form action="/soundcloud_search" method="get">
        {% csrf_token %}

        Search for: 
        <select id="query-type" name= 'query-type'>
                <option value="artist">artist</option>
                <option value="label">label</option>
            </select>
        by SoundCloud Username: <input type="text" id = "username" name = "username">
        <input type="submit" value="search" />
        </form>
    


        <form action="/search" method="get">
        {% csrf_token %}
        Search for: 
            <select id="query-type" name= 'query-type'>
                <option value="artist">artist</option>
                <option value="label">label</option>
            </select>
            <input type="text" name = "query" id = 'query'>
            <input type="submit"/>
        </form>

    {% endif %}


        {% if artists %}
        <h2 > Artists</h2>
        <ul type = none id = "artists">
        {% for artist in artists %}
            <li class = 'artist' >
                <!-- <img width="150" height="150" src="http://ws.audioscrobbler.com/2.0/?method=artist.imageredirect&amp;mbid={{artist.artist_id}}&amp;autocorrect=1&amp;size=largesquare&amp;api_key=c43db4e93f7608bb10d96fa5f69a74a1"> -->
                <img width="150" height="150" src="http://ws.audioscrobbler.com/2.0/?method=artist.imageredirect&amp;artist={{artist.name|escape}}&amp;autocorrect=1&amp;size=largesquare&amp;api_key=c43db4e93f7608bb10d96fa5f69a74a1">
                <div>
                <a href = "/artist/{{artist.artist_id}}">  {{ artist.name }}</a>

                {%if artist.disambiguation%}
                    <span>({{artist.disambiguation}})</span
                {%endif%}

                <span >
                    <button type="button" data-artist-id = "{{ artist.artist_id }}" class ="follow-artist">
                        {{artist.following_artist}}
                    </button>
                </span>
            </div>
            </li>
        {% endfor %}
        </ul>

        {% endif %}

        {% if labels %}
        <h2 > Labels </h2>
        <ul type=none id = "labels">
        {% for label in labels %}
            <li><a href = "/label/{{label.label_id}}">  {{ label.name }}</a>
                {%if label.disambiguation%}
                    <span>({{label.disambiguation}})</span
                {%endif%}
                <span >
                    <button type="button" data-label-name = "{{ label.name }}" data-label-id = "{{ label.label_id }}" class ="follow-label">
                        {{label.following_label}}
                    </button>
                </span>
            </li>
        {% endfor %}
        </ul>

        {% endif %}

    {% if page == 'my_playlist' %}
    <h2><a href = "/create_playlist" > CREATE PLAYLIST</a></h2>

    {% endif %}



    {% if playlists%}
    <ul><h2>Playlists</h2><ul>
        <li><h3><a href= "/create_playlist/">Create New Playlist</a><h3></li>
        {% for playlist in playlists %}
        <li class= "playlist">
            <h3>
                <a href= "/playlist/{{playlist.pk}}"    >{{playlist.name}}</a>
                <a><span class="glyphicon glyphicon-remove pull-right delete-playlist" data-playlist-id = {{playlist.pk}}></span></a>
            </h3>
            <h4>
                <div>{{playlist.description}}</div>
            <h4>
        </li>
        {% endfor %}

    {% endif%}


    </div>

    <div class="container col-md-4 scrollable">
        <div id="player">
        </div>

        <br>
        <br>
        <div class="noUiSlider"></div>

        <br>
        <!-- <ul>
            <li><h1>top<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>mid<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>tasdfasdf<h1></li>
            <li><h1>end<h1></li>
        </ul> -->
    </div>


</div>

{% endblock content %}
